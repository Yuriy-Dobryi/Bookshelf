function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},r=o.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){s[e]=t},o.parcelRequired7c6=r),r.register("kyEFX",(function(t,o){var n,s;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return s}),(function(e){return s=e}));var r={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)r[t[o]]=e[t[o]]},s=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("kyEFX").register(JSON.parse('{"5ZPII":"index.b37aa62d.js","8bXqy":"alternative-book.ed914283.png","lp5u4":"sprite.4fd37ecc.svg","jCYVU":"amazon.626c9508.png","dm81U":"amazon@2x.104a65be.png","h2fYN":"apple.652b354e.png","4EHhF":"apple@2x.15632d7d.png","kptGM":"bookShop.920db583.png","5UbS1":"index.43dcd89d.css","5rsK7":"shopping-list.093d50a2.js","hhu2s":"shopping-list.62cfa805.js"}')),r("aBn2U"),r("ftg0l");class i{getCategoriesList(){return fetch("https://books-backend.p.goit.global/books/category-list").then((e=>e.json()))}getCategoriesTop(){return fetch("https://books-backend.p.goit.global/books/top-books").then((e=>e.json()))}getSelectedCategories(e){return fetch(`https://books-backend.p.goit.global/books/category?category=${e}`).then((e=>e.json()))}getBookId(e){return fetch(`https://books-backend.p.goit.global/books/${e}`).then((e=>e.json()))}constructor(){}}var a={};a=function e(t,o,n){function s(i,a){if(!o[i]){if(!t[i]){var l=void 0;if(!a&&l)return l(i,!0);if(r)return r(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[i]={exports:{}};t[i][0].call(d.exports,(function(e){return s(t[i][1][e]||e)}),d,d.exports,e,t,o,n)}return o[i].exports}for(var r=void 0,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.create=o.visible=void 0;var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=document.createElement("div");return o.innerHTML=e.trim(),!0===t?o.children:o.firstChild},s=function(e,t){var o=e.children;return 1===o.length&&o[0].tagName===t},r=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};o.visible=r,o.create=function(e,t){var o=function(e,t){var o=n('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),r=o.querySelector(".basicLightbox__placeholder");e.forEach((function(e){return r.appendChild(e)}));var i=s(r,"IMG"),a=s(r,"VIDEO"),l=s(r,"IFRAME");return!0===i&&o.classList.add("basicLightbox--img"),!0===a&&o.classList.add("basicLightbox--video"),!0===l&&o.classList.add("basicLightbox--iframe"),o}(e=function(e){var t="string"==typeof e,o=e instanceof HTMLElement==1;if(!1===t&&!1===o)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(n(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),i=function(e){return!1!==t.onClose(a)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===r(e)||e.parentElement.removeChild(e),t()}),410),!0}(o,(function(){if("function"==typeof e)return e(a)}))};!0===t.closable&&o.addEventListener("click",(function(e){e.target===o&&i()}));var a={element:function(){return o},visible:function(){return r(o)},show:function(e){return!1!==t.onShow(a)&&function(e,t){return document.body.appendChild(e),setTimeout((function(){requestAnimationFrame((function(){return e.classList.add("basicLightbox--visible"),t()}))}),10),!0}(o,(function(){if("function"==typeof e)return e(a)}))},close:i};return a}},{}]},{},[1])(1);var l;l=new URL(r("kyEFX").resolve("8bXqy"),import.meta.url).toString();var c;c=new URL(r("kyEFX").resolve("lp5u4"),import.meta.url).toString();var d;d=new URL(r("kyEFX").resolve("jCYVU"),import.meta.url).toString();var u;u=new URL(r("kyEFX").resolve("dm81U"),import.meta.url).toString();var f;f=new URL(r("kyEFX").resolve("h2fYN"),import.meta.url).toString();var g;g=new URL(r("kyEFX").resolve("4EHhF"),import.meta.url).toString();var b;async function m(e){const{book_image:o,title:n,author:s,buy_links:r}=e;e.description||(e.description="Unfortunately, there is no description for this book at the moment."),e.book_image||(e.book_image=t(l));const i=a.create(`\n    <div class="modal-info">\n    <button type="button" class="modal__close-btn">\n    <svg class="modal__close-icon" width="8" height="8">\n      <use href="${t(c)}#icon-close"></use>\n    </svg>\n  </button>\n    <div class="modal-pop__container">\n    <img class="modal__img" src="${o}" alt="${n}" />\n      <div class="modal-info__box">\n        <h2 class="modal-info__title">${n}</h2>\n        <p class="modal-info__author">${s}</p>\n        <p class="modal-info__text">${e.description}</p>\n        <ul class="modal-info__shops">\n          <li>\n            <a class="modal-info__link" href="${r[0].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Amazon">\n              <img src="${t(d)}"\n                srcset="${t(u)} 2x" alt="Amazon shop" width="62" height="19" />\n            </a>\n          </li>\n          <li>\n            <a class="modal-info__link" href="${r[1].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Apple-books">\n              <img src="${t(f)}"\n                srcset="${t(g)} 2x" alt="Apple shop" width="33" height="32" />\n            </a>\n          </li>\n          <li>\n            <a class="modal-info__link" href="${r[4].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Bookshop">\n              <img src="${t(b)}"\n                srcset="${t(b)} 2x" alt="Book shop" width="38" height="36" />\n            </a>\n          </li>\n        </ul>\n      </div>\n</div>\n    <button class="modal__add-btn modal__add-btn-js">\n    add to shopping list\n</button>\n<div class="modal__remove-btn-wrapper visually-hidden">\n    <button class="modal__remove-btn">\n        remove from the shopping list\n    </button>\n    <p class="modal__remove-btn-message">\n        Сongratulations! You have added the book to the shopping list. To\n    delete, press the button “Remove from the shopping list”.\n    </p>\n    </div>\n</div>`,{onShow:()=>{document.addEventListener("keydown",m),document.addEventListener("click",p)},onClose:()=>{document.removeEventListener("click",p),document.removeEventListener("keydown",m)},closable:!1});function m({code:e}){"Escape"===e&&i.close()}function p({target:e}){e.closest(".modal-info")||i.close()}i.show();document.querySelector(".modal__close-btn").addEventListener("click",(function(){i.close()}));const h=document.querySelector(".modal__add-btn"),v=document.querySelector(".modal__remove-btn-wrapper");!function(){const t=JSON.parse(localStorage.getItem("SHOPPING-BOOKS-LIST"));if(t){t.find((t=>t._id===e._id))&&(h.classList.add("visually-hidden"),v.classList.remove("visually-hidden"))}}(),h.addEventListener("click",(function(){!function(e){const t=JSON.parse(localStorage.getItem("SHOPPING-BOOKS-LIST"));if(t){t.find((t=>t._id===e._id))||(t.push(e),localStorage.setItem("SHOPPING-BOOKS-LIST",JSON.stringify(t)))}else localStorage.setItem("SHOPPING-BOOKS-LIST",JSON.stringify([e]))}(e),h.classList.add("visually-hidden"),v.classList.remove("visually-hidden")})),v.addEventListener("click",(function(){!function(e){const t=JSON.parse(localStorage.getItem("SHOPPING-BOOKS-LIST")).filter((t=>t._id!==e._id));0===t.length?localStorage.removeItem("SHOPPING-BOOKS-LIST"):localStorage.setItem("SHOPPING-BOOKS-LIST",JSON.stringify(t))}(e),v.classList.add("visually-hidden"),h.classList.remove("visually-hidden")}))}b=new URL(r("kyEFX").resolve("kptGM"),import.meta.url).toString();const p=document.getElementById("loader-wrapper"),h=window.innerWidth;let v=5;h<1440&&h>=768?v=3:h<768&&(v=1);const y=new i,k=document.querySelector(".books-list"),_=async()=>{p.classList.remove("visually-hidden");const e=await y.getCategoriesTop();p.classList.add("visually-hidden"),k.innerHTML="",e.forEach((e=>{const t=e.books.slice(0,v).map((e=>`  \n        <div class="book-card" data-book-id="${e._id}">\n          <div class="book-card-hover">\n            <img loading="lazy" src="${e.book_image}" alt="${e.title}" class="book-image">\n            <p>quick view</p>\n          </div>\n          <div class="book-info">\n            <h3 class="book-title">${e.title}</h3>\n            <p class="book-autor">${e.author}</p>\n          </div>\n        </div>\n      `)).join(""),o=`\n    <section class="category-section">\n      <h3 class="all-categories-title">${e.list_name}</h3>\n      <div class="books-container">\n        ${t}\n      </div>\n      <button type=button data-category-books="${e.list_name}" class="category-books-button">SEE MORE</button>\n    </section>`;k.insertAdjacentHTML("beforeend",o)}));k.insertAdjacentHTML("afterbegin",'<h2 class="books-list-title">Best Sellers <span class="span-books-list-title">Books</span></h2>'),k.addEventListener("click",(async e=>{const t=e.target.closest(".book-card");if(t){const e=t.dataset.bookId;m(await y.getBookId(e))}})),k.addEventListener("click",(async e=>{if(e.target.classList.contains("category-books-button")){const t=e.target.dataset.categoryBooks;S(t),E(t)}}))};_();const S=async e=>{p.classList.remove("visually-hidden");const t=await y.getSelectedCategories(e);p.classList.add("visually-hidden"),k.innerHTML="";const o=e.split(" "),n=o.pop(),s=`\n    <section class="category-section">\n      <h2  class="books-list-title">${o.join(" ")} <span class="span-books-list-title">${n}</span></h2>\n      <div class="books-container">\n        ${t.map((e=>`\n    <div class="book-card book-card-wrapper" data-book-id="${e._id}">\n        <img loading="lazy" src="${e.book_image}" alt="${e.title}" class="book-image">\n        <div class="book-card-hover"><p>quick view</p></div>\n        <div class="book-info">\n          <h3 class="book-title">${e.title}</h3>\n          <p class="book-autor">${e.author}</p>\n        </div>\n    </div>\n    `)).join("")}\n      </div>\n    </section>\n  `;k.insertAdjacentHTML("beforeend",s),window.scrollTo(0,0)},L=new i,w=document.querySelector(".categories-list");function E(e){document.querySelector(".current-category").classList.remove("current-category");const t=document.querySelector(`[data-category-books="${e}"]`);t.classList.add("current-category"),w.scrollTo(0,t.offsetTop-10)}(async()=>{const e=(await L.getCategoriesList()).map((e=>`<li class="categories-item" data-category-books="${e.list_name}">${e.list_name}</li>`)).join("");w.insertAdjacentHTML("beforeend",e);document.querySelector(".categories-list").firstElementChild.addEventListener("click",_),w.addEventListener("click",(function(e){if("LI"!==e.target.nodeName||!e.target.dataset.categoryBooks)return;const t=e.target.dataset.categoryBooks;S(t)}))})(),w.addEventListener("click",(function(e){if("LI"!==e.target.nodeName)return;document.querySelector(".current-category").classList.remove("current-category"),e.target.classList.add("current-category")}));const O=document.getElementById("scrollUpBtn");window.addEventListener("scroll",(function(){const e=window.pageYOffset;O.style.display=e>1e3?"block":"none"})),O.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}));
//# sourceMappingURL=index.b37aa62d.js.map
